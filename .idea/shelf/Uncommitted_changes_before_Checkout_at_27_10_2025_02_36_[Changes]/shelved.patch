Index: app/src/main/java/com/example/tbcworks/adapter/AddressAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tbcworks.adapter\r\n\r\nimport android.view.LayoutInflater\r\nimport android.view.ViewGroup\r\nimport androidx.recyclerview.widget.DiffUtil\r\nimport androidx.recyclerview.widget.ListAdapter\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.example.tbcworks.R\r\nimport com.example.tbcworks.databinding.AddressItemLayoutBinding\r\nimport com.example.tbcworks.enums.AddressType\r\nimport com.example.tbcworks.items.AddressItem\r\n\r\nclass AddressAdapter(\r\n    private val onEditClick: (AddressItem) -> Unit,\r\n    private val onLongClick: (AddressItem) -> Unit\r\n) : ListAdapter<AddressItem, AddressAdapter.AddressViewHolder>(DIFFUTIL) {\r\n\r\n    override fun onCreateViewHolder(\r\n        parent: ViewGroup,\r\n        viewType: Int\r\n    ): AddressAdapter.AddressViewHolder {\r\n        val binding =\r\n            AddressItemLayoutBinding.inflate(LayoutInflater.from(parent.context), parent, false)\r\n        return AddressViewHolder(binding)\r\n    }\r\n\r\n    override fun onBindViewHolder(holder: AddressViewHolder, position: Int) {\r\n        holder.bind()\r\n    }\r\n\r\n    inner class AddressViewHolder(private val binding: AddressItemLayoutBinding) :\r\n        RecyclerView.ViewHolder(binding.root) {\r\n        fun bind() = with(binding) {\r\n            val item = getItem(position)\r\n\r\n            rbAddress.isChecked = item.isSelected\r\n            btnEdit.isEnabled = item.isSelected\r\n\r\n            rbAddress.setOnClickListener {\r\n                val newList = currentList.map { it.copy(isSelected = it.id == item.id) }\r\n                submitList(newList)\r\n            }\r\n\r\n            btnEdit.setOnClickListener {\r\n                onEditClick(item)\r\n            }\r\n\r\n            root.setOnLongClickListener {\r\n                onLongClick(item)\r\n                true\r\n            }\r\n\r\n            if(item.addressType == AddressType.HOME){\r\n                ivAddress.setImageResource(R.drawable.address_house)\r\n            }else{\r\n                ivAddress.setImageResource(R.drawable.address_building)\r\n            }\r\n\r\n            tvName.text = item.name\r\n            tvDescription.text = item.description\r\n\r\n\r\n        }\r\n    }\r\n\r\n    companion object {\r\n        val DIFFUTIL = object : DiffUtil.ItemCallback<AddressItem>() {\r\n            override fun areItemsTheSame(oldItem: AddressItem, newItem: AddressItem) = oldItem.id == newItem.id\r\n            override fun areContentsTheSame(oldItem: AddressItem, newItem: AddressItem) = oldItem == newItem\r\n        }\r\n    }\r\n}
===================================================================
diff --git a/app/src/main/java/com/example/tbcworks/adapter/AddressAdapter.kt b/app/src/main/java/com/example/tbcworks/adapter/AddressAdapter.kt
--- a/app/src/main/java/com/example/tbcworks/adapter/AddressAdapter.kt	(revision 8e08ed28e1c5f6d61257eb2e095448b568c397a2)
+++ b/app/src/main/java/com/example/tbcworks/adapter/AddressAdapter.kt	(date 1761514565597)
@@ -7,8 +7,8 @@
 import androidx.recyclerview.widget.RecyclerView
 import com.example.tbcworks.R
 import com.example.tbcworks.databinding.AddressItemLayoutBinding
-import com.example.tbcworks.enums.AddressType
-import com.example.tbcworks.items.AddressItem
+import com.example.tbcworks.common.enums.AddressType
+import com.example.tbcworks.common.items.AddressItem
 
 class AddressAdapter(
     private val onEditClick: (AddressItem) -> Unit,
Index: app/src/main/res/navigation/nav_graph.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/nav_graph\"\r\n    app:startDestination=\"@id/shopListFragment\">\r\n\r\n    <fragment\r\n        android:id=\"@+id/shopListFragment\"\r\n        android:name=\"com.example.tbcworks.screens.addressList.AddressListFragment\"\r\n        android:label=\"fragment_shop_list\"\r\n        tools:layout=\"@layout/fragment_address_list\" >\r\n        <argument\r\n            android:name=\"addressItem\"\r\n            app:argType=\"com.example.tbcworks.items.AddressItem\"\r\n            app:nullable=\"true\" />\r\n        <action\r\n            android:id=\"@+id/action_shopListFragment_to_addressFormFragment\"\r\n            app:destination=\"@id/addressFormFragment\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/addressFormFragment\"\r\n        android:name=\"com.example.tbcworks.screens.addressForm.AddressFormFragment\"\r\n        android:label=\"fragment_address_form\"\r\n        tools:layout=\"@layout/fragment_address_form\" >\r\n        <argument\r\n            android:name=\"addressItem\"\r\n            app:argType=\"com.example.tbcworks.items.AddressItem\"\r\n            app:nullable=\"true\" />\r\n        <action\r\n            android:id=\"@+id/action_addressFormFragment_to_shopListFragment\"\r\n            app:destination=\"@id/shopListFragment\" />\r\n    </fragment>\r\n</navigation>
===================================================================
diff --git a/app/src/main/res/navigation/nav_graph.xml b/app/src/main/res/navigation/nav_graph.xml
--- a/app/src/main/res/navigation/nav_graph.xml	(revision 8e08ed28e1c5f6d61257eb2e095448b568c397a2)
+++ b/app/src/main/res/navigation/nav_graph.xml	(date 1761514565666)
@@ -12,7 +12,7 @@
         tools:layout="@layout/fragment_address_list" >
         <argument
             android:name="addressItem"
-            app:argType="com.example.tbcworks.items.AddressItem"
+            app:argType="com.example.tbcworks.common.items.AddressItem"
             app:nullable="true" />
         <action
             android:id="@+id/action_shopListFragment_to_addressFormFragment"
@@ -25,7 +25,7 @@
         tools:layout="@layout/fragment_address_form" >
         <argument
             android:name="addressItem"
-            app:argType="com.example.tbcworks.items.AddressItem"
+            app:argType="com.example.tbcworks.common.items.AddressItem"
             app:nullable="true" />
         <action
             android:id="@+id/action_addressFormFragment_to_shopListFragment"
Index: app/src/main/java/com/example/tbcworks/viewModel/AddressViewModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tbcworks.viewModel\r\n\r\nimport androidx.lifecycle.LiveData\r\nimport androidx.lifecycle.MutableLiveData\r\nimport androidx.lifecycle.ViewModel\r\nimport com.example.tbcworks.enums.AddressType\r\nimport com.example.tbcworks.items.AddressItem\r\n\r\nclass AddressViewModel : ViewModel() {\r\n\r\n\r\n\r\n    private var id = 0\r\n\r\n    private val initialItems = listOf(\r\n        AddressItem(\r\n            id = id++,\r\n            addressType = AddressType.OFFICE,\r\n            name = \"My Office\",\r\n            description = DESCRIPTION\r\n        ),\r\n        AddressItem(\r\n            id = id++,\r\n            addressType = AddressType.HOME,\r\n            name = \"My Home\",\r\n            description = DESCRIPTION\r\n        )\r\n    )\r\n\r\n    private val _items = MutableLiveData<List<AddressItem>>(initialItems)\r\n    val items: LiveData<List<AddressItem>> get() = _items\r\n\r\n    fun nextId(): Int = id++\r\n    fun addAddress(address: AddressItem) {\r\n        val currentList = _items.value ?: emptyList()\r\n        _items.value = listOf(address) + currentList\r\n    }\r\n\r\n    fun updateAddress(updatedAddress: AddressItem) {\r\n        val currentList = _items.value ?: return\r\n        val index = currentList.indexOfFirst { it.id == updatedAddress.id }\r\n        if (index != -1) {\r\n            val newList = currentList.toMutableList()\r\n            newList[index] = updatedAddress\r\n            _items.value = newList\r\n        }\r\n    }\r\n\r\n    fun deleteAddress(address: AddressItem) {\r\n        val currentList = _items.value ?: return\r\n        _items.value = currentList.filter { it.id != address.id }\r\n    }\r\n\r\n    companion object {\r\n        const val DESCRIPTION = \"SBI Building, street 3, Software Park\"\r\n    }\r\n}\r\n
===================================================================
diff --git a/app/src/main/java/com/example/tbcworks/viewModel/AddressViewModel.kt b/app/src/main/java/com/example/tbcworks/viewModel/AddressViewModel.kt
--- a/app/src/main/java/com/example/tbcworks/viewModel/AddressViewModel.kt	(revision 8e08ed28e1c5f6d61257eb2e095448b568c397a2)
+++ b/app/src/main/java/com/example/tbcworks/viewModel/AddressViewModel.kt	(date 1761514565655)
@@ -3,8 +3,8 @@
 import androidx.lifecycle.LiveData
 import androidx.lifecycle.MutableLiveData
 import androidx.lifecycle.ViewModel
-import com.example.tbcworks.enums.AddressType
-import com.example.tbcworks.items.AddressItem
+import com.example.tbcworks.common.enums.AddressType
+import com.example.tbcworks.common.items.AddressItem
 
 class AddressViewModel : ViewModel() {
 
Index: app/src/main/java/com/example/tbcworks/screens/addressList/AddressListFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tbcworks.screens.addressList\r\n\r\nimport android.view.LayoutInflater\r\nimport android.view.ViewGroup\r\nimport androidx.fragment.app.setFragmentResultListener\r\nimport androidx.fragment.app.viewModels\r\nimport androidx.navigation.fragment.findNavController\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport com.example.tbcworks.BaseFragment\r\nimport com.example.tbcworks.adapter.AddressAdapter\r\nimport com.example.tbcworks.databinding.FragmentAddressListBinding\r\nimport com.example.tbcworks.items.AddressItem\r\nimport com.example.tbcworks.viewModel.AddressViewModel\r\n\r\nclass AddressListFragment : BaseFragment<FragmentAddressListBinding>() {\r\n    private lateinit var adapter: AddressAdapter\r\n    private val viewModel: AddressViewModel by viewModels()\r\n\r\n\r\n    override fun inflateBinding(\r\n        inflater: LayoutInflater,\r\n        container: ViewGroup?\r\n    ): FragmentAddressListBinding {\r\n        return FragmentAddressListBinding.inflate(inflater, container, false)\r\n    }\r\n\r\n    override fun bind() = with(binding){\r\n\r\n\r\n        adapter = AddressAdapter(\r\n            onEditClick = {addressItem ->\r\n                val action = AddressListFragmentDirections\r\n                    .actionShopListFragmentToAddressFormFragment(addressItem)\r\n\r\n                findNavController().navigate(action)\r\n            },\r\n            onLongClick = {addressItem ->\r\n                viewModel.deleteAddress(addressItem)\r\n            }\r\n        )\r\n\r\n        rvShopList.adapter = adapter\r\n        rvShopList.layoutManager = LinearLayoutManager(requireContext())\r\n\r\n        viewModel.items.observe(viewLifecycleOwner) { list ->\r\n            adapter.submitList(list.toList())\r\n        }\r\n\r\n        setFragmentResultListener(\"address\") { _, bundle ->\r\n            val address = bundle.getSerializable(\"address\") as? AddressItem ?: return@setFragmentResultListener\r\n\r\n            if (address.id == -1) {\r\n                val newAddress = address.copy(id = viewModel.nextId())\r\n                viewModel.addAddress(newAddress)\r\n            } else {\r\n                viewModel.updateAddress(address)\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    override fun listeners() = with(binding){\r\n        btnAddAddress.setOnClickListener {\r\n            addUser()\r\n        }\r\n        btnBack.setOnClickListener {\r\n\r\n        }\r\n    }\r\n    private fun addUser(){\r\n        val action = AddressListFragmentDirections\r\n            .actionShopListFragmentToAddressFormFragment(null)\r\n        findNavController().navigate(action)\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}
===================================================================
diff --git a/app/src/main/java/com/example/tbcworks/screens/addressList/AddressListFragment.kt b/app/src/main/java/com/example/tbcworks/screens/addressList/AddressListFragment.kt
--- a/app/src/main/java/com/example/tbcworks/screens/addressList/AddressListFragment.kt	(revision 8e08ed28e1c5f6d61257eb2e095448b568c397a2)
+++ b/app/src/main/java/com/example/tbcworks/screens/addressList/AddressListFragment.kt	(date 1761514565634)
@@ -9,7 +9,7 @@
 import com.example.tbcworks.BaseFragment
 import com.example.tbcworks.adapter.AddressAdapter
 import com.example.tbcworks.databinding.FragmentAddressListBinding
-import com.example.tbcworks.items.AddressItem
+import com.example.tbcworks.common.items.AddressItem
 import com.example.tbcworks.viewModel.AddressViewModel
 
 class AddressListFragment : BaseFragment<FragmentAddressListBinding>() {
Index: app/src/main/java/com/example/tbcworks/items/AddressItem.kt
===================================================================
diff --git a/app/src/main/java/com/example/tbcworks/items/AddressItem.kt b/app/src/main/java/com/example/tbcworks/common/items/AddressItem.kt
rename from app/src/main/java/com/example/tbcworks/items/AddressItem.kt
rename to app/src/main/java/com/example/tbcworks/common/items/AddressItem.kt
--- a/app/src/main/java/com/example/tbcworks/items/AddressItem.kt	(revision 8e08ed28e1c5f6d61257eb2e095448b568c397a2)
+++ b/app/src/main/java/com/example/tbcworks/common/items/AddressItem.kt	(date 1761514565608)
@@ -1,6 +1,6 @@
-package com.example.tbcworks.items
+package com.example.tbcworks.common.items
 
-import com.example.tbcworks.enums.AddressType
+import com.example.tbcworks.common.enums.AddressType
 import java.io.Serializable
 
 data class AddressItem(
Index: app/src/main/java/com/example/tbcworks/screens/addressForm/AddressFormFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tbcworks.screens.addressForm\r\n\r\nimport android.os.Bundle\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport androidx.core.os.bundleOf\r\nimport androidx.fragment.app.setFragmentResult\r\nimport androidx.fragment.app.viewModels\r\nimport androidx.navigation.fragment.findNavController\r\nimport androidx.navigation.fragment.navArgs\r\nimport com.example.tbcworks.BaseFragment\r\nimport com.example.tbcworks.databinding.FragmentAddressFormBinding\r\nimport com.example.tbcworks.enums.AddressType\r\nimport com.example.tbcworks.items.AddressItem\r\nimport com.example.tbcworks.viewModel.AddressViewModel\r\n\r\nclass AddressFormFragment : BaseFragment<FragmentAddressFormBinding>() {\r\n    private val viewModel: AddressViewModel by viewModels()\r\n    private val args: AddressFormFragmentArgs by navArgs()\r\n\r\n    override fun inflateBinding(\r\n        inflater: LayoutInflater,\r\n        container: ViewGroup?\r\n    ): FragmentAddressFormBinding {\r\n        return FragmentAddressFormBinding.inflate(inflater, container, false)\r\n    }\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n    }\r\n    override fun listeners() = with(binding){\r\n        btnBack.setOnClickListener {\r\n            findNavController().popBackStack()\r\n        }\r\n        btnSubmit.setOnClickListener {\r\n            submit()\r\n        }\r\n    }\r\n    private fun submit() {\r\n        with(binding){\r\n            val name = etName.text.toString().trim()\r\n            val desc = etDescription.text.toString().trim()\r\n            val selectedType = binding.spinnerAddressType.selectedItem.toString()\r\n            val type = when (selectedType) {\r\n                HOME -> AddressType.HOME\r\n                OFFICE -> AddressType.OFFICE\r\n                else -> AddressType.HOME\r\n            }\r\n\r\n            if (!validateInputs(name, desc)) return\r\n\r\n            val newAddress = if (binding.btnSubmit.text == EDIT_ADDRESS) {\r\n                editUser(name, desc, type)\r\n            } else {\r\n                addAddress(name, desc, type)\r\n            }\r\n            setFragmentResult(\"address\", bundleOf(\"address\" to newAddress))\r\n            findNavController().popBackStack()\r\n        }\r\n        \r\n\r\n    }\r\n    private fun validateInputs(name:String, desc: String): Boolean{\r\n        var isValid = true\r\n        if (name.isEmpty()) {\r\n            binding.etName.error = NAME_EMPTY_ERROR\r\n            isValid = false\r\n        }\r\n\r\n        if (desc.isEmpty()) {\r\n            binding.etDescription.error = DESC_EMPTY_ERROR\r\n            isValid = false\r\n        }\r\n\r\n        return isValid\r\n    }\r\n    private fun editUser(name: String, desc: String, type: AddressType): AddressItem = with(binding) {\r\n        val currentAddress = args.addressItem ?: throw Exception()\r\n\r\n        val updatedAddress = currentAddress.copy(\r\n            name = name,\r\n            description = desc,\r\n            addressType = type\r\n        )\r\n\r\n        return@with updatedAddress\r\n    }\r\n\r\n    private fun addAddress(name: String, desc: String, type: AddressType) : AddressItem = with(binding){\r\n\r\n        return@with AddressItem(\r\n        id = -1,\r\n        name = name,\r\n        description = desc,\r\n        addressType = type\r\n        )\r\n    }\r\n    override fun bind() = with(binding){\r\n        val item = args.addressItem\r\n\r\n        if (item!= null){\r\n            tvTitle.text = EDIT_ADDRESS\r\n            etName.setText(item.name)\r\n            etDescription.setText(item.description)\r\n            if(item.addressType == AddressType.HOME){\r\n                spinnerAddressType.setSelection(0)\r\n            }else{\r\n                spinnerAddressType.setSelection(1)\r\n            }\r\n            btnSubmit.text = EDIT_ADDRESS\r\n        }\r\n    }\r\n    companion object {\r\n        const val EDIT_ADDRESS = \"Edit Address\"\r\n        const val NAME_EMPTY_ERROR = \"Name cannot be empty\"\r\n        const val DESC_EMPTY_ERROR = \"Description cannot be empty\"\r\n        const val HOME = \"Home\"\r\n        const val OFFICE = \"Office\"\r\n    }\r\n\r\n\r\n}
===================================================================
diff --git a/app/src/main/java/com/example/tbcworks/screens/addressForm/AddressFormFragment.kt b/app/src/main/java/com/example/tbcworks/screens/addressForm/AddressFormFragment.kt
--- a/app/src/main/java/com/example/tbcworks/screens/addressForm/AddressFormFragment.kt	(revision 8e08ed28e1c5f6d61257eb2e095448b568c397a2)
+++ b/app/src/main/java/com/example/tbcworks/screens/addressForm/AddressFormFragment.kt	(date 1761514565642)
@@ -11,8 +11,8 @@
 import androidx.navigation.fragment.navArgs
 import com.example.tbcworks.BaseFragment
 import com.example.tbcworks.databinding.FragmentAddressFormBinding
-import com.example.tbcworks.enums.AddressType
-import com.example.tbcworks.items.AddressItem
+import com.example.tbcworks.common.enums.AddressType
+import com.example.tbcworks.common.items.AddressItem
 import com.example.tbcworks.viewModel.AddressViewModel
 
 class AddressFormFragment : BaseFragment<FragmentAddressFormBinding>() {
@@ -58,7 +58,7 @@
             setFragmentResult("address", bundleOf("address" to newAddress))
             findNavController().popBackStack()
         }
-        
+
 
     }
     private fun validateInputs(name:String, desc: String): Boolean{
Index: app/src/main/java/com/example/tbcworks/enums/AddressType.kt
===================================================================
diff --git a/app/src/main/java/com/example/tbcworks/enums/AddressType.kt b/app/src/main/java/com/example/tbcworks/common/enums/AddressType.kt
rename from app/src/main/java/com/example/tbcworks/enums/AddressType.kt
rename to app/src/main/java/com/example/tbcworks/common/enums/AddressType.kt
--- a/app/src/main/java/com/example/tbcworks/enums/AddressType.kt	(revision 8e08ed28e1c5f6d61257eb2e095448b568c397a2)
+++ b/app/src/main/java/com/example/tbcworks/common/enums/AddressType.kt	(date 1761514565621)
@@ -1,4 +1,4 @@
-package com.example.tbcworks.enums
+package com.example.tbcworks.common.enums
 
 enum class AddressType {
     HOME,
